{%  extends "navbar.html" %}
{% block nav %}
<link
      rel="stylesheet"
      type="text/css"
      
      href="{{ url_for('static', filename='css/style2.css') }}"
    />
    <div class="container-fluid h-100" style="margin-top: 3%;">
        <div class="row justify-content-center h-100">
            <div class="col-md-8 col-xl-6 chat">
                <p class="text-center text1">Make the world a better place!</p>
                <div class="h2" style="color: black;">
                    <div class="row">
                        <p class="text-center text2"> Experience tailored crop recommendations based on your geographical location, along with precise insights 
                            on local weather conditions and soil data. Additionally, receive expert guidance on pest control 
                            strategies to safeguard your crops. Begin the process by clicking the 'Generate' button."</p>
                    </div>
                </div>
                <form method="POST" action="">
                <div class="card">
                    <div class="arrow">
                        <a href="javascript:history.back()">
                            <i class="fas fa-arrow-left" style="margin-top: 100%; margin-left:100%; color: black; display: flex; "></i>
                        </a>
                    </div>
                    
                    <div class="form">
                            <div class="button">
                                <button class="button1" type="submit">GENERATE</button><br><br>
                            </div>

                            <div class="content-container">
                                <h2 class="h2">Response:</h2>
                            </div>
                            <div class="textarea-container">
                                <textarea  rows="20" style="width: 90%" readonly>{{ assistant_response }}</textarea>
                            </div>
                            <div><br></div>
                            <div class="images">
                                <img src="data:image/png;base64,{{ image_data }}" onerror="this.style.display='none';" class="hidden-img">
                                <img src="data:image/png;base64,{{ image2_data }}" onerror="this.style.display='none';" class="hidden-img"><br>
                                <img src="data:image/png;base64,{{ image3_data }}" onerror="this.style.display='none';" class="hidden-img">
                                <img src="data:image/png;base64,{{ image4_data }}" onerror="this.style.display='none';" class="hidden-img">
                            </div>                        
                    </div>
                </div>
                
                <div><br></div>
                <div><br></div>
                <div><br></div>   

                <div class="card">
                    <div class="content-container">
                        <h2 class="h2">Pest Control Advice:</h2>
                    </div>
                    <div class="textarea-container">
                        <textarea  rows="20" style="width: 90%" readonly>{{ pest_control_advice }}</textarea>
                    </div>
                </div>
            </form>
            </div>
        </div>
    </div>
<!--
    <script>
        const form = document.querySelector('form');
        const chatBox = document.getElementById('response');
        const pestControlButton = document.getElementById('pest-control-button');
        const pestControlAdviceBox = document.getElementById('pest-control-advice');
    
        // Event listener for the pest control button
        pestControlButton.addEventListener('click', async () => {
            const cropSuggestions = chatBox.value; // Retrieve the crop suggestions from the response textarea
    
            // Send the crop suggestions to the server to get pest control advice
            const response = await fetch('/get_pest_control', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ assistantResponse: cropSuggestions }), // Send the assistant's response
            });
    
            if (response.ok) {
                const { pestControlAdvice } = await response.json();
                
                // Display the pest control advice in the new textarea
                pestControlAdviceBox.value = pestControlAdvice;
            } else {
                alert('Error: Unable to get pest control advice.');
            }
        });
    </script>
-->
{% endblock nav %}